import { Meta, Canvas, Story } from '@storybook/addon-docs';
import { Popover } from './index';
import { PopoverVariant } from '../../types/enums';

import { Button } from './../Button/index';
import { Information, TokensTable } from '../../../../../docs-components';
import { ArgsTable } from '@storybook/addon-docs';

<Meta
  title='Kjernekomponenter/Popover'
  component={Popover}

argTypes={{
    trigger: {
      description:
        'En `ReactNode` som brukes til å åpne og lukke popoveren. Fungerer også som ankringspunkt til popoverens posisjon. Denne komponenten må ha en `ref`. Dette er en egenskap som finnes på alle primitive React-komponenter, men dersom det er en egendefinert komponent, må man bruke `React.forwardRef` i definisjonen av komponenten til å sette `ref`-egenskapen på riktig plass.',
      control: { type: 'object' },
    },
    children: {
      description: 'En valgfri ReactNode som blir popoverens innhold.',
      control: { type: 'object' },
    },
    arrow: {
      description:
        'Bestemmer om pilen på popoveren som peker til triggeren skal vises eller ikke.',
      control: { type: 'boolean' },
    },
    placement: {
      description:
        'Bestemmer hvilken side popoveren skal plasseres på, samt om plasseringen skal rettes inn etter hvor triggeren starter eller slutter.',
    },
    open: {
      description:
        'Bestemmer om popoveren skal vises eller ikke. Om denne ikke settes håndteres den internt i popover komponenten. Om den settes anbefales det å bruke den sammen med `onOpenChange`.',
      control: { type: 'boolean' },
    },
    onOpenChange: {
      description:
        'Funksjon som håndterer ednring av `open`. Om denne ikke settes håndteres den internt i popover komponenten. Om den settes anbefales det å bruke den sammen med `onOpenChange`.',
    },
    initialOpen: {
      description:
        'Bestemmer om tilstanden `open` skal settes til `true` ved rendering.',
      control: { type: 'boolean' },
    },
    offset: {
      description:
        'Overstyrer avstanden fra triggeren til popoveren i åpen tilstand.',
      control: { type: 'number' },
    },
  }}
/>

export const defaultArgs = {
  trigger: <Button>My trigger</Button>,
};

export const Template = (args) => {
  return (
    <Popover
      placement={args.placement}
      variant={args.variant}
      arrow={args.arrow}
      offset={args.offset}
      {...defaultArgs}
    >
      Lorem ipsum dolor sit amet...
    </Popover>
  );
};

export const ComplexTemplate = (args) => {
  return (
    <Popover
      placement={args.placement}
      variant={args.variant}
      arrow={args.arrow}
      offset={args.offset}
      {...defaultArgs}
    >
      <div style={{ display: 'flex', 'align-items': 'center', gap: '1rem' }}>
        Hallo!
        <ul>
          <li>Coffee</li>
          <li>Tea</li>
          <li>Milk</li>
        </ul>
        <Button>Click me!</Button>
      </div>
    </Popover>
  );
};

# Popover

<Information text='beta' />

Popover er et felt som plasseres over annet innhold og kan vises og skjules ved hjelp av å aktivere en gitt `trigger`.

## Varianter

### Default

<Canvas>
  <Story
    name='Popover'
    decorators={[
      (Story) => (
        <div style={{ margin: '3em' }}>
          <Story />
        </div>
      ),
    ]}
    parameters={{
      layout: 'centered',
    }}
    args={{
      placement: 'top',
      variant: PopoverVariant.Default,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Mer komplekst innhold

<Canvas>
  <Story
    name='Mer komplekst innhold'
    decorators={[
      (Story) => (
        <div style={{ margin: '3em' }}>
          <Story />
        </div>
      ),
    ]}
    parameters={{
      layout: 'centered',
    }}
    args={{
      placement: 'right',
      variant: PopoverVariant.Warning,
    }}
  >
    {ComplexTemplate.bind({})}
  </Story>
</Canvas>

## Props

<ArgsTable story='Popover' />

## Tokens

<TokensTable
  componentName='popover'
  description
  jsonKey='component.popover'
  showPreview={false}
/>
